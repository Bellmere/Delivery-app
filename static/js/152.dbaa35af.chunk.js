"use strict";(self.webpackChunkdelivery_app=self.webpackChunkdelivery_app||[]).push([[152],{152:function(e,r,n){n.r(r),n.d(r,{default:function(){return j}});n(791);var t=n(140),s=n(413),a=n(925),i=n(861),l=n(757),c=n.n(l),d=n(434),o=n(85),u=n(184);function m(e){var r=e.name,n=e.label,t=void 0===n?"":n,s=e.type,a=void 0===s?"text":s,i=e.placeholder,l=void 0===i?"":i,c=e.value,d=e.onChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("label",{className:"base__label",children:[t,(0,u.jsx)("input",{className:"base__input",type:a,name:r,placeholder:l,value:c,onChange:d})]})})}var h=function(e){return(0,u.jsx)("button",{className:"main__button",type:"submit",children:e.children})},p=function(e){var r=e.basketItems,n=e.name,t=e.email,s=e.phone,a=e.address,i={};return n||(i.name="Name is required"),t?/\S+@\S+\.\S+/.test(t)||(i.email="Email is invalid"):i.email="Email is required",s||(i.phone="Phone is required"),a||(i.address="Address is required"),r.length<=0&&(i.basketItems="Your basket is empty!"),i},_=n(662),x=["id"],b=function(){var e=(0,d.v9)((function(e){return e.menu.items}));console.log(e);var r=(0,d.I0)(),n=function(){var r=(0,i.Z)(c().mark((function r(n){var t,i,d,u,m,h,_,b;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),t=Object.fromEntries(Array.from(new FormData(n.target))),i=e.map((function(e){e.id;return(0,a.Z)(e,x)})),d=(0,s.Z)((0,s.Z)({},t),{},{basketItems:i}),u=p(d),!(Object.keys(u).length>0)){r.next=8;break}return m=Object.values(u).join("\n"),r.abrupt("return",o.Am.error(m));case 8:return h=(0,s.Z)((0,s.Z)({},d),{},{total:l}),console.log(h),r.prev=10,r.next=13,fetch("https://delivery-project.herokuapp.com/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});case 13:if(!(_=r.sent).ok){r.next=18;break}o.Am.success("The form has been submitted."),r.next=22;break;case 18:return r.next=20,_.text();case 20:throw b=r.sent,new Error(b);case 22:r.next=28;break;case 24:r.prev=24,r.t0=r.catch(10),o.Am.error("An error occurred while submitting the form."),console.error(r.t0);case 28:case"end":return r.stop()}}),r,null,[[10,24]])})));return function(e){return r.apply(this,arguments)}}(),l=e.reduce((function(e,r){return e+r.price*r.quantity}),0);return(0,u.jsx)("section",{className:"order__section",children:(0,u.jsx)(t.W,{children:(0,u.jsxs)("form",{className:"order-from",onSubmit:n,children:[(0,u.jsxs)("div",{className:"order-form--wrapper",children:[(0,u.jsxs)("div",{className:"credentials--wrap",children:[(0,u.jsx)("div",{className:"credentials__item",children:(0,u.jsx)(m,{name:"name",type:"text",label:"Name:",placeholder:"Name:"})}),(0,u.jsx)("div",{className:"credentials__item",children:(0,u.jsx)(m,{name:"email",type:"email",label:"Email:",placeholder:"Email:"})}),(0,u.jsx)("div",{className:"credentials__item",children:(0,u.jsx)(m,{name:"phone",type:"tel",label:"Phone:",placeholder:"Phone:"})}),(0,u.jsx)("div",{className:"credentials__item",children:(0,u.jsx)(m,{name:"address",type:"text",label:"Address:",placeholder:"Address:"})})]}),(0,u.jsx)("div",{className:"order-items",children:(0,u.jsx)("ul",{className:"order__list",children:e.map((function(e,n){var t=e.price*e.quantity;return(0,u.jsxs)("li",{className:"order__item",children:[(0,u.jsx)("div",{className:"order__photo--wrap",children:(0,u.jsx)("img",{src:e.src,alt:e.name})}),(0,u.jsxs)("div",{className:"order__box",children:[(0,u.jsx)("h3",{children:e.name}),(0,u.jsxs)("p",{children:["Price: $",t]}),(0,u.jsx)("button",{className:"order__quantity__btn order__delete__btn",type:"button",onClick:function(){return n=e.id,void r((0,_.Od)({id:n}));var n},children:"Delete"}),(0,u.jsxs)("div",{className:"order__quantity",children:[(0,u.jsx)("input",{type:"number",value:e.quantity,readOnly:!0}),(0,u.jsxs)("div",{className:"order__quantity__options",children:[(0,u.jsx)("button",{className:"order__quantity__btn order__quantity__btn--up",type:"button",onClick:function(){return n=e.id,void r((0,_.Qd)({id:n}));var n},children:"+"}),(0,u.jsx)("button",{className:"order__quantity__btn order__quantity__btn--down",type:"button",onClick:function(){return n=e.id,void r((0,_.a3)({id:n}));var n},children:"-"})]})]})]})]},n)}))})})]}),(0,u.jsxs)("div",{className:"order-submit--wrap",children:[(0,u.jsxs)("span",{children:["Total price: $",l]}),(0,u.jsx)(h,{children:"Submit"})]})]})})})};function j(){return(0,u.jsx)("section",{children:(0,u.jsx)(t.W,{children:(0,u.jsx)(b,{})})})}}}]);
//# sourceMappingURL=152.dbaa35af.chunk.js.map